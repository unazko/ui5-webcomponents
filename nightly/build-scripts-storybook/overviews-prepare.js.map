{"version":3,"file":"overviews-prepare.js","sourceRoot":"","sources":["../../build-scripts-storybook/overviews-prepare.ts"],"names":[],"mappings":"AAAA,8HAA8H;AAG9H,OAAO,EAAE,MAAM,aAAa,CAAC;AAC7B,OAAO,IAAI,MAAM,MAAM,CAAC;AAExB,MAAM,wBAAwB,GAAG,aAAa,CAAC;AAE/C,sCAAsC;AACtC,MAAM,cAAc,GAAG,CAAC,GAAW,EAAE,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC;AAEnF,oCAAoC;AACpC,MAAM,WAAW,GAAG,CAAC,SAAiB,EAAE,EAAE,CAAC;uCACJ,SAAS;;;;;;;;;;;;;;;cAelC,cAAc,CAAC,SAAS,CAAC;;;;;;;;;;;;;;;;;;;;;;;CAuBtC,CAAC;AAEF,+CAA+C;AAC/C,MAAM,gBAAgB,GAAG,KAAK,EAAE,OAAe,EAAE,EAAE;IACjD,MAAM,OAAO,GAAG,MAAM,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;IAEnE,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;QAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;QAChD,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE;YACvB,0CAA0C;YAC1C,MAAM,gBAAgB,CAAC,QAAQ,CAAC,CAAC;SAClC;aAAM,IAAI,KAAK,CAAC,MAAM,EAAE,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;YAC/D,0EAA0E;YAC1E,MAAM,aAAa,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;YAC5D,MAAM,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,aAAa,cAAc,CAAC,EAAE,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC;YACnG,4BAA4B;YAC5B,MAAM,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,aAAa,cAAc,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;YACpF,OAAO,CAAC,GAAG,CAAC,aAAa,aAAa,cAAc,CAAC,CAAC;SACvD;KACF;AACH,CAAC,CAAC;AAEF,qDAAqD;AACrD,MAAM,IAAI,GAAG,KAAK,IAAI,EAAE;IACtB,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,wBAAwB,CAAC,CAAC;IAC/D,MAAM,gBAAgB,CAAC,OAAO,CAAC,CAAC;AAClC,CAAC,CAAC;AAEF,IAAI,EAAE,CAAC","sourcesContent":["// the following script goes through all the stories in the _stories folder and generates the {ComponentName}Overview.mdx file\n\n\nimport fs from 'fs/promises';\nimport path from 'path';\n\nconst STORIES_ROOT_FOLDER_NAME = '../_stories';\n\n// Function to split camel case string\nconst splitCamelCase = (str: string) => str.replace(/([a-z0-9])([A-Z])/g, '$1 $2');\n\n// Function to generate file content\nconst fileContent = (component: string) => `import { Meta } from \"@storybook/blocks\";\nimport * as ComponentStories from \"./${component}.stories.ts\";\n\nimport { componentInfo } from \"./argTypes.ts\";\n\nimport { Footer } from \"@sb/components/footer/Footer.tsx\";\nimport {\n  Title,\n  Subtitle,\n  Description,\n  Primary,\n  ArgsTable,\n  Stories,\n  PRIMARY_STORY,\n} from \"@storybook/addon-docs\";\n\n<Meta name=\"${splitCamelCase(component)} Overview\" of={ComponentStories} />\n\n<header>\n  <span className=\"sb-ui5-title\">\n    <Title />\n  </span>\n  {componentInfo.since && (\n    <span className=\"sb-ui5-component-heading-since\">\n      <b>v{componentInfo.since}</b>\n    </span>\n  )}\n</header>\n<div className=\"sb-ui5-component-package\">\n  <b>{componentInfo.package}</b>\n</div>\n<h2 className=\"sb-ui5-control-tag\">&lt;{componentInfo.tagName}&gt;</h2>\n<Subtitle />\n<Description />\n<br />\n<Primary />\n<ArgsTable story={PRIMARY_STORY} />\n{!componentInfo.showDefaultStoryOnly && <Stories />}\n<Footer />\n`;\n\n// Recursive function to process each directory\nconst processDirectory = async (dirPath: string) => {\n  const entries = await fs.readdir(dirPath, { withFileTypes: true });\n\n  for (const entry of entries) {\n    const fullPath = path.join(dirPath, entry.name);\n    if (entry.isDirectory()) {\n      // If the entry is a directory, process it\n      await processDirectory(fullPath);\n    } else if (entry.isFile() && entry.name.endsWith('.stories.ts')) {\n      // If the entry is a file and matches the criteria, generate overview file\n      const componentName = entry.name.replace('.stories.ts', '');\n      await fs.writeFile(path.join(dirPath, `${componentName}Overview.mdx`), fileContent(componentName));\n      // remove old files if exist\n      await fs.rm(path.join(dirPath, `01-${componentName}Overview.mdx`), { force: true });\n      console.log(`Generated ${componentName}Overview.mdx`);\n    }\n  }\n};\n\n// Initial call to process the root stories directory\nconst main = async () => {\n  const rootDir = path.join(__dirname, STORIES_ROOT_FOLDER_NAME);\n  await processDirectory(rootDir);\n};\n\nmain();\n"]}