"use strict";const r=new WeakMap,o=new WeakMap,u={attributes:!0,childList:!0,characterData:!0,subtree:!0},v=e=>{const t=e;return t.accessibleNameRef?b(e):t.accessibleName?t.accessibleName:void 0},b=e=>{const t=e.accessibleNameRef?.split(" ")??[],s=e.getRootNode();let l="";return t.forEach((n,c)=>{const a=s.querySelector(`[id='${n}']`),d=`${a&&a.textContent?a.textContent:""}`;d&&(l+=d,c<t.length-1&&(l+=" "))}),l},m=e=>{const t=new Set;return E(e).forEach(c=>{t.add(c)}),(e.accessibleNameRef?.split(" ")??[]).forEach(c=>{const a=g(e,c);a&&t.add(a)}),Array.from(t)},E=e=>{const t=e.getRootNode().querySelectorAll(`[for="${e.id}"]`);return Array.from(t)},g=(e,t)=>e.getRootNode().querySelector(`[id='${t}']`),M=e=>{const t=[];if(E(e).forEach(l=>{const n=l.textContent;n&&t.push(n)}),t.length)return t.join(" ")},k=e=>s=>{if(!(s&&s.type==="property"&&s.name==="accessibleNameRef"))return;const l=o.get(e);if(!l)return;const n=l.observedElements,c=m(e);n.forEach(a=>{c.includes(a)||i(l,a)}),c.forEach(a=>{n.includes(a)||(f(l,a),l.observedElements.push(a))}),l?.callback()},A=(e,t)=>{if(o.has(e))return;const s=m(e),l=k(e),n={host:e,observedElements:s,callback:t,invalidationCallback:l};o.set(e,n),e.attachInvalidate(l),s.forEach(c=>{f(n,c)}),t()},f=(e,t)=>{let s=r.get(t);if(!s){s={observer:null,callbacks:[]};const l=new MutationObserver(()=>{s.callbacks.forEach(a=>{a()});const c=document.getElementById(t.id);e.host.id===t.getAttribute("for")||c||i(e,t)});s.observer=l,l.observe(t,u),r.set(t,s)}s.callbacks.includes(e.callback)||s.callbacks.push(e.callback)},i=(e,t)=>{const s=r.get(t);s&&(s.callbacks=s.callbacks.filter(l=>l!==e.callback),s.callbacks.length||(s.observer?.disconnect(),r.delete(t))),e.observedElements=e.observedElements.filter(l=>l!==t)},T=e=>{const t=o.get(e);if(!t)return;[...t.observedElements].forEach(l=>{i(t,l)}),e.detachInvalidate(t.invalidationCallback),o.delete(e)};export{v as getEffectiveAriaLabelText,M as getAssociatedLabelForTexts,A as registerUI5Element,T as deregisterUI5Element,b as getAllAccessibleNameRefTexts};
//# sourceMappingURL=AriaLabelHelper.js.map
